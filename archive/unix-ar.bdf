// BinDef for a common Unix archive (ar) file

// This format is not standardized so information is taken from
// https://en.wikipedia.org/wiki/Ar_(Unix)#File_format

{
  meta: {
    bdf: "0.5",
    name: "Unix ar (archive) file",
    mime: ["application/x-archive"],
    exts: [".ar", ".a", ".lib"]
  },
  binary: [
    { type: byte[8], magic: _ == "!<arch>\n" },
    { type: byte[16], id: fileId,       name: "File identifier", strip: true},
    { type: byte[12], id: modTimestamp, name: "File modification timestamp (seconds)", strip: true},
    { type: byte[6],  id: ownerId,      name: "Owner ID", strip: true},
    { type: byte[6],  id: groupId,      name: "Group ID", strip: true},
    { type: byte[8],  id: fileMode,     name: "File mode (octal)", strip: true },
    { type: byte[10], id: fileSize,     name: "File size (bytes)", strip: true },
    { type: byte[2], magic: _ == "\x60\x0a" }
  ]
}